{% extends 'base.html' %}
 {% load widget_tweaks %} 
 {% block title %}
 Schools - PARG System
{% endblock %} 
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-school"></i> Schools</h2>
    <a href="{% url 'schools:create' %}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Add New School
    </a>
</div>

<div class="card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Logo</th>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Contact</th>
                        <th>Classes</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for school in schools %}
                    <tr>
                        <td>
                            {% if school.logo %}
                            <img
                                src="{{ school.logo.url }}"
                                alt="Logo"
                                class="rounded"
                                width="50"
                                height="50"
                            />
                            {% else %}
                            <div
                                class="bg-secondary rounded d-flex align-items-center justify-content-center"
                                style="width: 50px; height: 50px"
                            >
                                <i class="fas fa-school text-white"></i>
                            </div>
                            {% endif %}
                        </td>
                        <td>
                            <strong>{{ school.name }}</strong>
                        </td>
                        <td>{{ school.address|truncatewords:5 }}</td>
                        <td>
                            <small>
                                <i class="fas fa-envelope"></i> {{ school.email
                                }}<br />
                                <i class="fas fa-phone"></i> {{ school.phone }}
                            </small>
                        </td>
                        <td>
                            <span class="badge bg-info"
                                >{{ school.classes.count }} Classes</span
                            >
                        </td>
                        <td>
                            <div class="btn-group" role="group">
                                <a
                                    href="{% url 'schools:detail' school.pk %}"
                                    class="btn btn-sm btn-outline-primary"
                                >
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a
                                    href="{% url 'schools:update' school.pk %}"
                                    class="btn btn-sm btn-outline-warning"
                                >
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a
                                    href="{% url 'schools:delete' school.pk %}"
                                    class="btn btn-sm btn-outline-danger"
                                >
                                    <i class="fas fa-trash"></i>
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-center text-muted">
                            <i class="fas fa-school fa-3x mb-3"></i>
                            <br />No schools found.
                            <a href="{% url 'schools:create' %}"
                                >Add your first school</a
                            >
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        {% if is_paginated %}
        <nav aria-label="School pagination">
            <ul class="pagination justify-content-center">
                {% if page_obj.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1">First</a>
                </li>
                <li class="page-item">
                    <a
                        class="page-link"
                        href="?page={{ page_obj.previous_page_number }}"
                        >Previous</a
                    >
                </li>
                {% endif %}

                <li class="page-item active">
                    <span class="page-link"
                        >{{ page_obj.number }} of {{
                        page_obj.paginator.num_pages }}</span
                    >
                </li>

                {% if page_obj.has_next %}
                <li class="page-item">
                    <a
                        class="page-link"
                        href="?page={{ page_obj.next_page_number }}"
                        >Next</a
                    >
                </li>
                <li class="page-item">
                    <a
                        class="page-link"
                        href="?page={{ page_obj.paginator.num_pages }}"
                        >Last</a
                    >
                </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}
    </div>
</div>
{% endblock %}
